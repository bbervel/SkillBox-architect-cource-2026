# 6. План поэтазной разработки

## 6.1. Принципы и подход

- Разработка ведётся итеративно с выделением минимально жизнеспособного продукта (MVP), позволяющего как можно быстрее выйти на рынок и начать сбор обратной связи.
- Архитектура микросервисов позволяет разным командам работать параллельно над различными компонентами, что ускоряет реализацию последующих этапов.
- Каждый этап включает не только разработку нового функционала, но и сопутствующие работы: тестирование, документирование, развёртывание, мониторинг.
- Приоритет отдаётся критическим компонентам, обеспечивающим базовую ценность для пользователей и сбор данных.

## 6.2. Этап 1: MVP (Minimum Viable Product) — запуск ядра приложения

**Цель:** Запустить базовую версию приложения, позволяющую пользователям регистрироваться, записывать тренировки (с GPS и ручным вводом), просматривать историю, добавлять инвентарь (обувь), получать простые уведомления и видеть базовые социальные функции (друзья, лента активности).

**Срок:** 6 месяцев

| Компонент | Функциональность, реализуемая на этапе | Зависимости |
|-----------|----------------------------------------|-------------|
| **User Service** | Регистрация/вход (email + соцсети), профиль, настройки приватности, управление друзьями (добавление/удаление). | API Gateway |
| **Workout Service** | Ручной ввод тренировок, запись через GPS телефона, отображение маршрута на карте, базовая статистика (время, дистанция, темп), история тренировок. | User Service (идентификация), Object Storage (хранение GPX-треков) |
| **Inventory Service** | Добавление спортивной обуви (модель, дата начала использования), автоматический подсчёт пробега на основе тренировок, отображение текущего пробега. | Workout Service (получение данных тренировок для расчёта) |
| **Social Service (базовый)** | Лента активности друзей (показ новых тренировок, возможность ставить лайки и комментарии). Поиск друзей по имени/email. | User Service, Workout Service |
| **Notification Service** | Базовые push-уведомления (о новых лайках, комментариях, напоминания о тренировках). | Firebase Cloud Messaging / APNS, все сервисы генерируют события |
| **API Gateway** | Маршрутизация запросов, аутентификация (JWT), rate limiting. | — |
| **Инфраструктура** | Развёртывание базовых сервисов в одном регионе (например, EU), минимальный мониторинг (логги, метрики). | — |

**Критические компоненты этапа:** User Service, Workout Service, API Gateway. Без них приложение неработоспособно.

## 6.3. Этап 2: Сообщество и геймификация

**Цель:** Усилить социальное взаимодействие и мотивацию пользователей через группы, челленджи, достижения и уровни.

**Срок:** 4 месяца после MVP (квартал 3–4)

| Компонент | Функциональность, реализуемая на этапе | Зависимости |
|-----------|----------------------------------------|-------------|
| **Social Service (расширение)** | Создание групп по интересам, вступление, чаты внутри групп (простые текстовые), модерация. Поиск людей по интересам и локации (геопоиск). | User Service, Elasticsearch (для поиска) |
| **Gamification Service** | Система уровней и опыта (начисление за тренировки), значки за достижения (серии, личные рекорды). Лидерборды среди друзей и в группах. | Workout Service (данные тренировок), Social Service (группы) |
| **Workout Service (расширение)** | Добавление сравнения с самим собой (графики прогресса), с регионом (обезличенная статистика). Личные рекорды. | — |
| **Notification Service (расширение)** | Уведомления о получении нового уровня, значка, приглашения в группы, результаты челленджей. | Gamification Service, Social Service |
| **Интеграция с носимых устройств (начальная)** | Подключение популярных устройств через облачные API (Garmin, Polar) — импорт тренировок. | Integration Service (новый компонент) |

**Критические компоненты этапа:** Social Service, Gamification Service.

## 6.4. Этап 3: Монетизация и персонализация

**Цель:** Внедрение промоакций, новостей спорта, интеграция с e-commerce для стимулирования продаж и повышения вовлечённости через контент.

**Срок:** 5 месяцев (квартал 5–6)

| Компонент | Функциональность, реализуемая на этапе | Зависимости |
|-----------|----------------------------------------|-------------|
| **Promo Service** | Создание и таргетинг промоакций на основе данных тренировок, инвентаря, региона. Отображение промо в ленте и в контексте тренировок. Интеграция с каталогом товаров компании (получение данных о товарах, ценах). | User Service (профиль, регион), Inventory Service (износ), Workout Service (активность), E-commerce API компании |
| **Integration Service (расширение)** | Полноценная интеграция с существующими приложениями компании (единый вход, синхронизация данных тренировок, перенос покупок). Подключение дополнительных партнёров (новостные агентства, спортивные клубы). | — |
| **Notification Service (расширение)** | Уведомления о персонализированных промо, новостях спорта по интересам. | Promo Service |
| **Workout Service (расширение)** | Добавление новостной ленты спорта (по выбранным видам). | Integration Service (получение новостей от партнёров) |

**Критические компоненты этапа:** Promo Service, Integration Service (для связи с e-commerce).

## 6.5. Этап 4: Расширенная аналитика и глобальное масштабирование

**Цель:** Обеспечить поддержку миллионов пользователей по всему миру, глубокую аналитику для бизнеса, соответствие локальным требованиям и продвинутые функции для профессионалов.

**Срок:** 6 месяцев (квартал 7–9)

| Компонент | Функциональность, реализуемая на этапе | Зависимости |
|-----------|----------------------------------------|-------------|
| **Infrastructure (глобализация)** | Развёртывание в нескольких регионах (US, Asia, дополнительных зонах EU). Репликация данных с учётом data residency. Глобальный CDN. Автомасштабирование. | Все сервисы должны быть готовы к мультирегиональному развёртыванию |
| **Analytics Service** | Построение Data Lake, ETL-процессы, подготовка дашбордов для внутренних команд. Интеграция с существующим Data Warehouse компании. | Все сервисы генерируют события в Kafka |
| **Workout Service (продвинутый)** | Поддержка профессиональных форматов (FIT), расширенная статистика (VO2max, пульсовые зоны), анализ техники (при подключении датчиков). | Integration Service (датчики) |
| **Social Service (расширенный)** | Видеочаты для групп, проведение массовых соревнований (рейтинги в реальном времени). | WebRTC, Redis для лидербордов |
| **Соответствие регуляциям** | Внедрение механизмов согласий (consent management) для всех регионов, поддержка удаления данных (right to be forgotten). | User Service, все сервисы хранящие PII |

**Критические компоненты этапа:** Инфраструктура (мультирегион), Analytics Service.

## 6.6. Сводная таблица этапов

| Этап | Название | Основные сервисы | Длительность |
|------|----------|------------------|--------------|
| 1 | MVP | User, Workout, Inventory (базовый), Social (базовый), Notification (базовый), API Gateway | 6 мес. |
| 2 | Сообщество и геймификация | Social (расширенный), Gamification, Workout (расширенный), Integration (начальный) | 4 мес. |
| 3 | Монетизация и персонализация | Promo, Integration (расширенный), Notification (расширенный) | 5 мес. |
| 4 | Глобализация и аналитика | Инфраструктура, Analytics, Workout (продвинутый), Social (продвинутый) | 6 мес. |

## 6.7. Критически важные компоненты

На основе анализа бизнес-требований и рисков выделяются следующие критически важные компоненты, которые должны быть реализованы с высоким качеством и надёжностью:

1. **User Service** — основа всей системы, без него невозможна идентификация пользователей.
2. **Workout Service** — ядро ценности приложения для пользователей (трекинг).
3. **API Gateway** — критическая точка входа, обеспечивающая безопасность и маршрутизацию.
4. **Notification Service** — обеспечивает удержание и вовлечение.
5. **Базы данных и объектное хранилище** — надёжное хранение пользовательских данных.

## 6.8. Соответствие бизнес-целям

| Этап | Бизнес-цели, достигаемые на этапе |
|------|------------------------------------|
| 1 | Закладывает основу для сбора данных и базового вовлечения. |
| 2 | Повышает вовлечённость через сообщество и геймификацию, что работает на цель 2. |
| 3 | Начинает монетизацию через промо (цель 1) и усиливает сбор данных (цель 3). |
| 4 | Обеспечивает глобальное масштабирование (цель 4) и углублённую аналитику (цель 3). |

План позволяет гибко реагировать на изменения рынка и обратную связь, при этом каждая итерация даёт измеримый бизнес-результат.