# ADR-008: Использование Redis для кэширования и лидербордов

## Статус
Принято

## Контекст
В системе есть данные, которые требуют быстрого доступа:
- Сессии пользователей и кэш профилей.
- Лидерборды в реальном времени во время соревнований.
- Часто запрашиваемые статистики (например, общая дистанция за месяц).

## Рассмотренные альтернативы
1. **Не использовать кэш** — всегда читать из основной БД.
2. **Использовать Memcached** — простое кэширование ключ-значение.
3. **Использовать Redis** — поддержка сложных структур (sorted sets для лидербордов), персистентность, pub/sub.

## Решение
Использовать Redis как основное in-memory хранилище для кэширования и лидербордов.

### Обоснование
- **Скорость** — Redis обеспечивает микросекундные задержки.
- **Структуры данных** — sorted sets идеально подходят для рейтингов.
- **Персистентность** — можно настроить сохранение на диск для важных данных.
- **Pub/sub** — может использоваться для уведомлений в реальном времени.
- Memcached проще, но не поддерживает нужные структуры.

## Последствия
### Положительные
- Высокая производительность лидербордов.
- Снижение нагрузки на основные БД.
- Возможность использовать Redis для временных данных (сессии, rate limiting).

### Отрицательные / Требующие внимания
- Дополнительная инфраструктура.
- Риск потери данных при сбое, если не настроена персистентность.
- Необходимость инвалидации кэша.