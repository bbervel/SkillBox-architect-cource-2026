# ADR-004: Мультиоблачная стратегия с Kubernetes

## Статус
Принято

## Контекст
Компания уже использует нескольких облачных провайдеров (AWS, GCP, Azure) и не хочет привязываться к одному. Требуется глобальное присутствие с учётом data residency (хранение данных в определённых регионах). Также важна возможность использовать лучшие сервисы каждого провайдера.

## Рассмотренные альтернативы
1. **Единый облачный провайдер** (например, только AWS).
2. **On-premise** — собственные серверы.
3. **Мультиоблачная стратегия с абстракцией через Kubernetes**.

## Решение
Использовать мультиоблачную стратегию с развёртыванием микросервисов в Kubernetes (k8s) у разных провайдеров.

### Обоснование
- **Отсутствие vendor lock-in** — возможность мигрировать между провайдерами.
- **Соответствие data residency** — можно разворачивать кластеры в регионах, требуемых законодательством (например, данные EU в европейских дата-центрах AWS/GCP).
- **Использование лучших сервисов** — например, объектное хранилище одного провайдера, аналитические инструменты другого.
- **Kubernetes как стандарт** — единая платформа оркестрации упрощает управление и переносимость.

On-premise отвергнут из-за высоких капитальных затрат и несоответствия стратегии компании.

## Последствия
### Положительные
- Гибкость в выборе провайдера и регионов.
- Возможность оптимизировать затраты.
- Единые инструменты управления (kubectl, Helm, Terraform).

### Отрицательные / Требующие внимания
- Сложность сетевого взаимодействия между облаками (латентность, трафик).
- Необходимость унифицировать мониторинг и логирование.
- Управление мультикластерной средой (Federation, GitOps).

### Компромиссы
Допускается некоторая дополнительная сложность ради свободы выбора и соблюдения регуляций.